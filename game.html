<!--
   game.html
   
   Copyright 2019 jxwww <jxwww@LAPTOP-BBO3G54P>
   
   This program is free software; you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation; either version 2 of the License, or
   (at your option) any later version.
   
   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.
   
   You should have received a copy of the GNU General Public License
   along with this program; if not, write to the Free Software
   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,
   MA 02110-1301, USA.
   
   
-->
<!--https://forums.tumult.com/t/move-an-element-or-div-with-arrow-keys/2514
about keyboard events https://www.kirupa.com/html5/keyboard_events_in_javascript.htm
https://developer.mozilla.org/en-US/docs/Games/Techniques/2D_collision_detection-->
<!--empty arrays evaluate to true in js-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
	<title>Moving Object</title>
	<meta http-equiv="content-type" content="text/html;charset=utf-8" />
	<meta name="generator" content="Geany 1.30.1" />
	<style>
		#circle{
			width:50px;
			height:50px;
			background:white;
			outline:none;
			border-radius:25px;
			z-index:1;
		}
		#box{
			border-width:5px;
			border-color:#00ffff;
			position:fixed;
			border-style:solid;
			width:1000px;
			height:700px;
			z-index:-1;
			top:10px;
			right:10px;
			left:10px;
			bottom:10px;
		}
		#obstacle{
			background-color:#00FF37;
			width:20px;
			height:200px;
			position:absolute;
			z-index:0;
		}
	</style>
	
</head>
<body style="background-color:black;" onload=start()>
	<div id="circle" style="left:15px;top:15px;position:absolute;"></div>
	<div id="box" style="background-color:black;"></div>	
	<div id="obstacle" style="left:500px;top:515px;"></div>
	<button id="res" type="button" style="display:none" onclick=start()>Restart</button>
	<script>
		var keys=[];
		var timer;
		var restart=false;
		function start(){
			if(restart){
				document.getElementById('res').style.display="none";
				document.getElementById('circle').style.left="15px";
				document.getElementById('circle').style.top="15px";
			}
			window.addEventListener('keydown', function (e) {
				keys = (keys || []);
				keys[e.keyCode] = (e.type == "keydown");
			})
			window.addEventListener('keyup', function (e) {
				keys[e.keyCode] = (e.type == "keydown");            
			})
			timer=setInterval(move, 1/10);//changing interval changes speed
		}
		function move(){//for key presses
			var x = parseFloat(document.getElementById('circle').style.left,10);
			var y = parseFloat(document.getElementById('circle').style.top,10);
			var diameter=parseFloat("50px",10);
			var left=parseFloat(document.getElementById('obstacle').style.left,10);
			var t=parseFloat(document.getElementById('obstacle').style.top,10);
			if(x+diameter>left&&y+diameter>t&&x<left){//collision between right circle and left rect
				document.getElementById("res").style.display="block";
				clearInterval(timer);
				restart=true;
			}
			if (keys&&keys[37]==true&&x>15) {
				x -= 1;
				document.getElementById('circle').style.left = x + 'px';
			}if (keys&&keys[39]==true&&x<965) {
				x += 1;
				document.getElementById('circle').style.left = x + 'px';
			}
			if (keys&&keys[38]==true&&y>15) {
				y -= 1;
				document.getElementById('circle').style.top = y + 'px';
			}if (keys&&keys[40]==true&&y<665) {
				y += 1;
				document.getElementById('circle').style.top = y + 'px';
			}
		}
	</script>
</body>

</html>
